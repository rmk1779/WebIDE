sap.ui.define(["sap/ui/core/mvc/Controller","sap/m/MessagePopover","sap/m/MessageToast"],function(e,t,r){"use strict";return e.extend("emp.EmpReg.controller.View4",{onInit:function(){this.oRouter=sap.ui.core.UIComponent.getRouterFor(this);this.oRouter.getRoute("View24").attachPatternMatched(this._onObjectMatched,this)},_onObjectMatched:function(e){debugger;var t;var r=e.getParameters("arguments");var o=this.getView();o.setModel(this.getOwnerComponent().getModel());o.bindElement("/Employees/"+r.arguments.miniPath)},onHRNotify:function(e){var t=this.getView();var r=t.byId("oPop");if(!r){r=sap.ui.xmlfragment(t.getId(),"emp.EmpReg.fragments.HRnotific",this);this.getView().addDependent(r);r.bindElement("/edits")}r.openBy(e.getSource())},onDisapprove:function(){this.byId("oPop").close()},onLogout:function(){this.getOwnerComponent().getRouter().navTo("View1",null,true)},onAcceptPress:function(e){var t=this.getView();var r=t.getModel();var o=r.getProperty("/Employees");var s=r.getProperty("/length");var n=r.getProperty("/edits");var g=e.getSource().getParent().getParent().getTitle();var i=e.getSource().getParent().getParent().getAuthorName();var a=e.getSource().getParent().getParent().getDescription();for(var p=0;p<o.length;p++){if(g===o[p].empId){o[p].mobile=i;o[p].currentAddress=a;r.setProperty("/Employees",o);break}}for(var p=0;p<n.length;p++){if(g===n[p].edId){n.splice(p,1);r.setProperty("/edits",n);r.setProperty("/length/0/editsLength",n.length);if(n.length==0){r.setProperty("/length/0/editsLength","");r.setProperty("/request/0/requestNoti","Transparent")}if(n.length>0){r.setProperty("/length/0/editsLength",n.length);r.setProperty("/request/0/requestNoti","Reject")}sap.m.MessageToast.show("Request Approved");break}}},onItemClose:function(e){var t=this.getView().getModel();var o=t.getProperty("/Employees");var s=t.getProperty("/length");var n=t.getProperty("/edits");var g=e.getSource().getTitle();for(var i=0;i<n.length;i++){if(g==n[i].edId){n.splice(i,1);t.setProperty("/edits",n);t.setProperty("/length/0/editsLength",n.length);break}}if(n.length==0){t.setProperty("/length/0/editsLength","");t.setProperty("/request/0/requestNoti","Transparent")}if(n.length>0){t.setProperty("/length/0/editsLength",n.length);t.setProperty("/request/0/requestNoti","Reject")}r.show(e.getSource().getTitle()+"Notification Closed ")},onRejectPress:function(e){var t=this.getView().getModel();var r=e.getSource().getParent().getParent().getTitle();var o=t.getProperty("/Employees");var s="Your address and Mobile number update Request has been Rejected ";var n="Reject";var g=t.getProperty("/edits");for(var i=0;i<o.length;i++){if(r===o[i].empId){t.setProperty("/Employees/"+i+"/rejectMsg",s);t.setProperty("/Employees/"+i+"/rejectNoti",n);break}}for(var i=0;i<g.length;i++){if(r==g[i].edId){g.splice(i,1);t.setProperty("/edits",g);t.setProperty("/length/0/editsLength",g.length);t.setProperty("/reject/0/rejectMsg",s);if(g.length===0){t.setProperty("/length/0/editsLength","");t.setProperty("/request/0/requestNoti","Transparent")}if(g.length>0){t.setProperty("/length/0/editsLength",g.length);t.setProperty("/request/0/requestNoti","Reject")}sap.m.MessageToast.show("Request Rejected");break}}}})});