sap.ui.define(["sap/ui/core/mvc/Controller","sap/ui/model/Filter","sap/ui/model/FilterOperator","sap/ui/core/Fragment","sap/m/MessageToast"],function(e,a,t,s,i){"use strict";return e.extend("emp.EmpReg.controller.View3",{onInit:function(){this.oRouter=sap.ui.core.UIComponent.getRouterFor(this)},onSearch:function(e){var a=e.getParameter("query");if(!a){a=e.getParameter("newValue")}var t=new sap.ui.model.Filter("empName",sap.ui.model.FilterOperator.Contains,a);var s=new sap.ui.model.Filter("empId",sap.ui.model.FilterOperator.Contains,a);var i=new sap.ui.model.Filter({filters:[s,t],and:false});var l=[i];var o=this.getView().byId("empList");var r=o.getBinding("items");r.filter(l)},oDialog:null,onAddEmp:function(e){var a=new Date;var t=a.getDate()+"-"+(a.getMonth()+1)+"-"+a.getFullYear();var s=this.getView();if(!this.oDialog){this.oDialog=sap.ui.xmlfragment(s.getId("helloDialog"),"emp.EmpReg.fragments.AddEmp",this);s.addDependent(this.oDialog)}this.oDialog.open();var i=this.byId("DP1").setProperty("minDate",a)},onSave:function(e){var a=true;var t=this.getView().getModel();var s=t.getProperty("/Employees");var l=this.byId("fName").getValue();var o=this.byId("fEmail").getValue();var r=this.byId("fMobile").getValue();var u=this.byId("fPwd").getValue();var d=this.byId("fSalary").getValue();var h=this.byId("DP1").getValue();var m=this.byId("posCombo").getSelectedItem().getText();var n=s.length;var V=101;var p=n+V;var b="EMP"+p;var f={empId:b,empName:l,email:o,mobile:r,password:u,joinDate:h,position:m,salary:d,currency:"INR"};for(var S=0;S<s.length;S++){if(l===""||o===""||r===""||u===""||h===""||m===""||d===""){if(l===""){this.byId("fName").setValueState(sap.ui.core.ValueState.Error)}else{this.byId("fName").setValueState(sap.ui.core.ValueState.None)}if(o===""){this.byId("fEmail").setValueState(sap.ui.core.ValueState.Error);sap.m.MessageToast.show("Enter Email")}else{this.byId("fEmail").setValueState(sap.ui.core.ValueState.None)}if(r===""){this.byId("fMobile").setValueState(sap.ui.core.ValueState.Error)}else{this.byId("fMobile").setValueState(sap.ui.core.ValueState.None)}if(u===""){this.byId("fPwd").setValueState(sap.ui.core.ValueState.Error)}else{this.byId("fPwd").setValueState(sap.ui.core.ValueState.None)}if(d===""){this.byId("fSalary").setValueState(sap.ui.core.ValueState.Error)}else{this.byId("fSalary").setValueState(sap.ui.core.ValueState.None)}if(h===""){this.byId("DP1").setValueState(sap.ui.core.ValueState.Error)}else{this.byId("DP1").setValueState(sap.ui.core.ValueState.None)}sap.m.MessageToast.show("Enter input");a=false;break}this.byId("fEmail").setValueState(sap.ui.core.ValueState.None);this.byId("fMobile").setValueState(sap.ui.core.ValueState.None);this.byId("fPwd").setValueState(sap.ui.core.ValueState.None);this.byId("fSalary").setValueState(sap.ui.core.ValueState.None);this.byId("DP1").setValueState(sap.ui.core.ValueState.None);var y=/^\w+([\.-]?\w+)*@\w+([\.-]?\w+)*(\.\w{2,3})+$/;var c=/^[0-9]{10}$/;var I=/^(?=.*\d)[a-zA-Z0-9]{5,10}$/;var g=/^\d{2}-[a-zA-Z]{3}-\d{4}$/;if(!o.match(y)&&o!==""){this.byId("fEmail").setValueState(sap.ui.core.ValueState.Error);sap.m.MessageToast.show("Enter correct email format abc@xyz.com");a=false;break}else{this.byId("fEmail").setValueState(sap.ui.core.ValueState.None)}if(!r.match(c)&&r!==""&&o.match(y)){this.byId("fMobile").setValueState(sap.ui.core.ValueState.Error);sap.m.MessageToast.show("Enter 10 digit Mobile Number");a=false;break}else{this.byId("fMobile").setValueState(sap.ui.core.ValueState.None)}if(!u.match(I)&&u!==""&&o.match(y)&&r.match(c)){this.byId("fPwd").setValueState(sap.ui.core.ValueState.Error);sap.m.MessageToast.show("Password should be Alpha-Numeric 5-10 character");a=false;break}else{this.byId("fPwd").setValueState(sap.ui.core.ValueState.None)}if(!h.match(g)&&h!==""&&o.match(y)&&r.match(c)&&u.match(I)){this.byId("DP1").setValueState(sap.ui.core.ValueState.Error);sap.m.MessageToast.show("Enter correct DATE format");a=false;break}else{this.byId("DP1").setValueState(sap.ui.core.ValueState.None)}if(b===s[S].empId){sap.m.MessageToast.show("ID already taken");a=false;break}if(o===s[S].email){sap.m.MessageToast.show("Email already taken");a=false;break}if(u===s[S].password){sap.m.MessageToast.show("Password already taken");a=false;break}if(r===s[S].mobile){sap.m.MessageToast.show("Mobile Num already taken");a=false;break}if(s[S].mobile===f.mobile||s[S].email===f.email){var w="Employee Mobile or Email already used";i.show(w);a=false;break}}if(a){s.push(f);t.setProperty("/Employees",s);t.setData(s,true);sap.ui.getCore().setModel(t);this.byId("fName").setValue("");this.byId("fEmail").setValue("");this.byId("fMobile").setValue("");this.byId("fPwd").setValue("");this.byId("DP1").setValue("");this.byId("fSalary").setValue("");this.byId("fEmail").setValueState(sap.ui.core.ValueState.None);this.byId("fMobile").setValueState(sap.ui.core.ValueState.None);this.byId("fPwd").setValueState(sap.ui.core.ValueState.None);this.byId("fSalary").setValueState(sap.ui.core.ValueState.None);this.byId("DP1").setValueState(sap.ui.core.ValueState.None);i.show("New Employee Added");this.byId("helloDialog").close()}},onCloseDialog:function(){this.byId("fName").setValueState(sap.ui.core.ValueState.None);this.byId("fEmail").setValueState(sap.ui.core.ValueState.None);this.byId("fMobile").setValueState(sap.ui.core.ValueState.None);this.byId("fPwd").setValueState(sap.ui.core.ValueState.None);this.byId("fSalary").setValueState(sap.ui.core.ValueState.None);this.byId("DP1").setValueState(sap.ui.core.ValueState.None);this.byId("fName").setValue("");this.byId("fEmail").setValue("");this.byId("fMobile").setValue("");this.byId("fPwd").setValue("");this.byId("DP1").setValue("");this.byId("fSalary").setValue("");this.byId("helloDialog").close()},onSelect:function(e){var a=e.getParameters().listItem;var t=sap.ui.core.UIComponent.getRouterFor(this);t.navTo("View24",{miniPath:a.getBindingContextPath().substr(11)})},onDelete:function(e){var a=e.getSource();var t=e.getParameter("listItem");a.removeItem(t);i.show(e.getSource().getTitle()+"Employee Removed")}})});